<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terrain Test</title>

    <!-- <img id = "geotiff" src="exportImage (1).tiff" class="hidden"> -->
    <img id = "geotiff" src="https://environment.data.gov.uk/image/rest/services/SURVEY/LIDAR_Composite_2m_DTM_2020_Elevation/ImageServer/exportImage?bbox=348391%2C457481%2C348747%2C456988&bboxSR=&size=&imageSR=&time=&format=tiff&pixelType=F32&noData=&noDataInterpretation=esriNoDataMatchAny&interpolation=+RSP_BilinearInterpolation&compression=&compressionQuality=&bandIds=&sliceId=&mosaicRule=&renderingRule=&adjustAspectRatio=true&lercVersion=1&compressionTolerance=&f=image" class="hidden">
    <!-- https://environment.data.gov.uk/image/rest/services/SURVEY/LIDAR_Composite_2m_DTM_2020_Elevation/ImageServer/exportImage?bbox=348391%2C457481%2C348747%2C456988&bboxSR=&size=&imageSR=&time=&format=tiff&pixelType=F32&noData=&noDataInterpretation=esriNoDataMatchAny&interpolation=+RSP_BilinearInterpolation&compression=&compressionQuality=&bandIds=&sliceId=&mosaicRule=&renderingRule=&adjustAspectRatio=true&lercVersion=1&compressionTolerance=&f=image -->


    <script src="https://cdn.jsdelivr.net/npm/geotiff@2.0.7/dist-browser/geotiff.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plotty@0.4.9/dist/plotty.min.js"></script>
    <!-- <script src="terrain.js"></script> -->
</head>

<body>
  <canvas id="plot"></canvas>
  <canvas id="plot"></canvas>
    <script>
        (async function() {
          const tiff = await GeoTIFF.fromUrl("_ags_41cd876c_dabc_4660_a534_25532792dd9c.tif");
          const image = await tiff.getImage();
          const data = await image.readRasters();

          console.log(tiff);
          console.log(image);
          console.log(data);


          const canvas = document.getElementById("plot");
          const plot = new plotty.plot({
            canvas,
            data: data[0],
            width: image.getWidth(),
            height: image.getHeight(),
            domain: [0, 256],
            colorScale: "hot"
          });
          plot.render();
        })();
    </script>
</body>
</html>
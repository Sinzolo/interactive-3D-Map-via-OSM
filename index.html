<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Interactive 3D Map via OSM</title>
    <link rel="icon" href="favicon.png">
    <link rel="preload" href="rasterWorker.js">
    <link rel="preload" href="geotiff.js.map">

    <!-- <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>                      A-Frame -->
    <script src="aframe.min.js"></script>
    <script src="simple-sun-sky.min.js"></script>
    <script defer src="geotiff.min.js"></script> <!-- Tiff manipulator -->
    <script defer src="proj4.min.js"></script> <!-- Coord converter -->
    <script defer src="https://cdn.jsdelivr.net/gh/diarmidmackenzie/instanced-mesh@v0.6.0/src/instanced-mesh.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-extras/dist/aframe-extras.controls.min.js"></script>   -->
    <!-- <script src="https://unpkg.com/aframe-geometry-merger-component/dist/aframe-geometry-merger-component.min.js"></script>  Not sure what this is for-->


    <!-- <img id = "geotiff" src="uniTiff/SD45ne_DTM_2m.tif" class="hidden">
        <img id = "geotiff" src="cityTiff/SD46se_DTM_2m.tif" class="hidden">
        <img id = "geotiff" src="leylandTiff/SD52sw_DTM_2m.tif" class="hidden">
        <img id = "geotiff" src="lydiateTiff/SD51nw_DTM_2m.tif" class="hidden"> -->

    <script defer src="utilities.js"></script>
    <script defer src="osmtogeojson.min.js"></script>
    <script defer src="conversions.js"></script>
    <script defer src="terrain.js"></script>
    <script defer src="buildings.js"></script>
    <script defer src="DijkstrasAlgo.js"></script>
    <script defer src="paths.js"></script>
    <script defer src="navigation.js"></script>
    <script defer src="main.js"></script>

</head>

<body>

    <div id="welcomeScreen">
        <h2>Welcome to my Third Year Project for Lancaster University.</h2>
        <br>This website automatically generates a 3D map of the specified place using OSM's large database.
        <br><button id="loadMapBtn" onclick="uniMap(), showMap()">Load Uni Map</button>
        <br><button id="loadMapBtn" onclick="cityMap(), showMap()">Load City Map</button>
    </div>

    <div id="mapScreen" style="display: none">
        <button id="loadMenuBtn" onclick="showMainMenu()">Load Menu</button>
        <button id="loadNavigationMenuBtn" onclick="showNavigationMenu()">Navigate</button>

        <br><button id="highQualityBtn" title="Better quality but worse performance" onclick="setLowQuality(false)">High
            Quality</button>
        <button id="lowQualityBtn" title="Better performance but worse quality" onclick="setLowQuality(true)">Low
            Quality</button>

        <div id="navigationScreen" style="display: none">
            <label for="destinationTextBox">Destination:</label>
            <input id="destinationLat" type="number" class="coords" placeholder="latitude" step="0.00001" min="-90"
                max="90" value="54.010930"> /
            <input id="destinationLong" type="number" class="coords" placeholder="longitude" step="0.00001" min="-180"
                max="180" value="-2.783544"><br>
            <button id="startNavigationBtn" onclick="startNavigation()">Go!</button>
            <button id="hideNavigationMenuBtn" onclick="hideNavigationMenu()">Cancel</button>
        </div>
        <label id="loading" style="display: none">Loading</label>

        <!-- <button id="navigationButton" onclick="showNavigationMenu()">Navigate</button> -->

        <a-scene id="scene" vr-mode-ui="enabled: true" stats background="color: lightblue">
            <a-simple-sun-sky id="sun" sun-position="0.7 1 -1" light-color="#87cefa" dark-color="#00bfff"
                fog-color="#74d2fa"></a-simple-sun-sky>
            <a-entity light="type: ambient; color: #BBB"></a-entity>
            <a-entity light="type: directional; color: #FFF; intensity: 0.8" position="0.7 1 -1"></a-entity>
            <!-- <a-entity id="rig" movement-controls="fly: true; speed: 50" position-limit="ymin: 200; ymax: 200" rotation="0 -90 0">
                    <a-camera id="player"></a-camera>
                    <a-camera id="debugCamera" active="false" movement-controls="fly: true; speed: 50"></a-camera> -->
            <!-- <a-entity id="camera" camera position="0 251.6 0" look-controls></a-entity> -->
            <!-- </a-entity> -->
            <a-entity id="rig" rotation="0 -90 0">
                <a-entity id="playerCamera" camera="active: true" look-controls></a-entity>
                <a-entity id="debugCamera" camera="active: false" look-controls
                    wasd-controls="acceleration: 200; fly: true"></a-entity>
            </a-entity>

            <!-- TODO Cant get flight control to work -->
            <!-- <a-entity flight-controls> -->
            <!-- or you could use universal-controls instead of both look- and wasd-controls. -->
            <!-- <a-entity primitive= "flight-controls" universal-controls="movementControls: flight-controls, hmd"></a-entity>
                </a-entity> -->

            <!-- <a-entity buffer-geometry-merger material="vertexColors: vertex">
                    <a-entity geometry="primitive: sphere; radius: 3" vertex-colors-buffer="baseColor: red" position="200 2 0"></a-entity>
                </a-entity> -->
        </a-scene>
    </div>


</body>

</html>